
<!DOCTYPE html>
<html lang="<%= locale %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= __('print_title') %></title>
    <link rel="stylesheet" href="/styles/Print.css">
    <link rel="stylesheet" href="/styles/Header.css">
    <link rel="stylesheet" href="/styles/Footer.css">
    <link rel="stylesheet" href="/styles/Buttons.css">
    <script>
        function updateFileInfo() {
            const fileInput = document.getElementById('document');
            const fileInfo = document.getElementById('fileInfo');
            const pagesInput = document.getElementById('pages');

            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                fileInfo.textContent = `<%= __('file_name') %>: ${file.name}, <%= __('file_size') %>: ${(file.size / 1024).toFixed(2)} KB`;

                pagesInput.value = "<%= __('detecting') %>";
                fetch('/get-file-info', {
                    method: 'POST',
                    body: new FormData(document.getElementById('printForm'))
                })
                    .then(response => response.json())
                    .then(data => {
                        pagesInput.value = data.pages || "<%= __('unknown') %>";
                    })
                    .catch(() => {
                        pagesInput.value = "<%= __('error_retrieving_pages') %>";
                    });
            } else {
                fileInfo.textContent = '';
                pagesInput.value = '';
            }
        }
    </script>
    <%- include('./partials/favicon') %>
</head>
<body>
<%- include('./partials/header')%>

<h1><%= __('print_heading') %></h1>
<form id="printForm" action="/print" method="POST" enctype="multipart/form-data">
    <label for="document"><%= __('upload_document') %>:</label>
    <input type="file" id="document" name="document" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" required onchange="updateFileInfo()"><br><br>
    <p id="fileInfo"></p>

    <label for="pages"><%= __('number_of_pages') %>:</label>
    <input type="text" id="pages" name="pages" readonly><br><br>

    <label for="print_pages"><%= __('pages_to_print') %>:</label>
    <input type="text" id="print_pages" name="print_pages" placeholder="<%= __('print_pages_placeholder') %>"><br><br>

    <label for="copies"><%= __('number_of_copies') %>:</label>
    <input type="number" id="copies" name="copies" min="1" value="1" required><br><br>

    <label for="color"><%= __('color_mode') %>:</label>
    <select id="color" name="color">
        <option value="black_white"><%= __('black_white') %></option>
        <option value="color"><%= __('color') %></option>
    </select><br><br>

    <label for="paper_size"><%= __('paper_size') %>:</label>
    <select id="paper_size" name="paper_size">
        <option value="A4">A4</option>
        <option value="A3">A3</option>
        <option value="Letter">Letter</option>
    </select><br><br>

    <label for="double_sided"><%= __('double_sided_printing') %>:</label>
    <input type="checkbox" id="double_sided" name="double_sided"><br><br>

    <button type="submit"><%= __('print_button') %></button>
</form>

<%- include('./partials/footer') %>
</body>
</html>

